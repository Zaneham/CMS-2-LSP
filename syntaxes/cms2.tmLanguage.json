{
  "name": "CMS-2",
  "scopeName": "source.cms2",
  "fileTypes": ["cms2", "cm2", "cms"],
  "patterns": [
    {"include": "#comments"},
    {"include": "#strings"},
    {"include": "#numbers"},
    {"include": "#system-blocks"},
    {"include": "#declarations"},
    {"include": "#types"},
    {"include": "#statements"},
    {"include": "#operators"},
    {"include": "#keywords"},
    {"include": "#predefined-functions"},
    {"include": "#identifiers"}
  ],
  "repository": {
    "comments": {
      "patterns": [
        {
          "name": "comment.block.cms2",
          "begin": "''",
          "end": "''",
          "patterns": [
            {"name": "comment.block.cms2"}
          ]
        }
      ]
    },
    "strings": {
      "patterns": [
        {
          "name": "string.quoted.single.cms2",
          "match": "'[^']*'"
        },
        {
          "name": "string.quoted.other.cms2",
          "match": "H\\([^)]*\\)"
        }
      ]
    },
    "numbers": {
      "patterns": [
        {
          "name": "constant.numeric.octal.cms2",
          "match": "\\bO\\([0-7]+\\)"
        },
        {
          "name": "constant.numeric.binary.cms2",
          "match": "\\bB\\([01]+\\)"
        },
        {
          "name": "constant.numeric.hex.cms2",
          "match": "\\bX\\([0-9A-Fa-f]+\\)"
        },
        {
          "name": "constant.numeric.float.cms2",
          "match": "\\b[0-9]+\\.[0-9]+([Ee][+-]?[0-9]+)?\\b"
        },
        {
          "name": "constant.numeric.integer.cms2",
          "match": "\\b[0-9]+\\b"
        }
      ]
    },
    "system-blocks": {
      "patterns": [
        {
          "name": "keyword.control.system-block.cms2",
          "match": "\\b(SYS-DD|END-SYS-DD|SYS-PROC|SYS-PROC-REN|END-SYS-PROC|LOC-DD|END-LOC-DD|AUTO-DD|END-AUTO-DD)\\b"
        }
      ]
    },
    "declarations": {
      "patterns": [
        {
          "name": "storage.type.vrbl.cms2",
          "match": "\\bVRBL\\b"
        },
        {
          "name": "storage.type.table.cms2",
          "match": "\\b(TABLE|END-TABLE|FIELD)\\b"
        },
        {
          "name": "storage.type.procedure.cms2",
          "match": "\\b(PROCEDURE|END-PROC|EXEC-PROC)\\b"
        },
        {
          "name": "storage.type.function.cms2",
          "match": "\\b(FUNCTION|END-FUNCTION)\\b"
        },
        {
          "name": "storage.type.type.cms2",
          "match": "\\b(TYPE|END-TYPE)\\b"
        },
        {
          "name": "storage.type.switch.cms2",
          "match": "\\b(SWITCH|END-SWITCH|P-SWITCH|END-P-SW|L-SWITCH)\\b"
        },
        {
          "name": "storage.type.file.cms2",
          "match": "\\b(FILE|FORMAT|INPUTLIST|OUTPUTLIST|STRINGFORM)\\b"
        }
      ]
    },
    "types": {
      "patterns": [
        {
          "name": "storage.type.primitive.cms2",
          "match": "\\b(I|A|F|B|H|C|S|U)\\b(?=\\s+[0-9]|\\s*$|\\s+[SU])"
        },
        {
          "name": "storage.modifier.cms2",
          "match": "\\((EXTDEF|EXTREF|LOCREF|TRANSREF)\\)"
        },
        {
          "name": "storage.modifier.packing.cms2",
          "match": "\\b(NONE|MEDIUM|DENSE|INDIRECT)\\b"
        }
      ]
    },
    "statements": {
      "patterns": [
        {
          "name": "keyword.control.flow.cms2",
          "match": "\\b(IF|THEN|ELSE|ELSIF|END|BEGIN|CASE|LOOP|VARY|WHILE|UNTIL|FOR|THRU|BY|FROM|TO|WITHIN)\\b"
        },
        {
          "name": "keyword.control.branch.cms2",
          "match": "\\b(GOTO|EXIT|RESUME|RETURN|STOP)\\b"
        },
        {
          "name": "keyword.control.find.cms2",
          "match": "\\b(FIND|FOUND|NOTFOUND|VARYING)\\b"
        },
        {
          "name": "keyword.operator.assignment.cms2",
          "match": "\\bSET\\b"
        },
        {
          "name": "keyword.other.io.cms2",
          "match": "\\b(INPUT|OUTPUT|OPEN|CLOSE|READ|PRINT|PUNCH|OCM|DISPLAY|ENCODE|DECODE|CONVERTIN|CONVERTOUT)\\b"
        }
      ]
    },
    "operators": {
      "patterns": [
        {
          "name": "keyword.operator.comparison.cms2",
          "match": "\\b(EQ|NE|LT|GT|LE|GE|LTEQ|GTEQ)\\b"
        },
        {
          "name": "keyword.operator.logical.cms2",
          "match": "\\b(AND|OR|NOT|XOR)\\b"
        },
        {
          "name": "keyword.operator.arithmetic.cms2",
          "match": "\\b(ABS|MOD)\\b"
        },
        {
          "name": "keyword.operator.bit.cms2",
          "match": "\\b(BIT|CHAR|SHIFT|CIRC|CAT)\\b"
        },
        {
          "name": "keyword.operator.assignment.cms2",
          "match": "\\bTO\\b"
        }
      ]
    },
    "keywords": {
      "patterns": [
        {
          "name": "keyword.other.cms2",
          "match": "\\b(CMODE|SYSTEM|DATA|DATAPOOL|OPTIONS|LIBS|DEBUG|TRACE|PTRACE|SNAP|REGS|OVERFLOW|SAVING|CORAD|EXCHANGE|SWAP|USING|WITH|RANGE|VALID|INVALID|EQUALS|MEANS|HEAD|OVERLAY|CHECKID|DEFID|SPILL|CORRECT|MODE|OODP|DEP|BASE|ALG|COMP|DIRECT|LOG|EVENP|ENDFILE|NITEMS|KEY1|KEY2|KEY3)\\b"
        },
        {
          "name": "punctuation.terminator.cms2",
          "match": "\\$"
        }
      ]
    },
    "predefined-functions": {
      "patterns": [
        {
          "name": "support.function.builtin.cms2",
          "match": "\\b(SIN|COS|ASIN|ACOS|ATAN|ATAN2|ASIN2|ACOS2|EXP|LN|ALOG|SQRT|IEXP|ISIN|ICOS|BAMS|RAD|FIRST|LAST|PRED|SUCC|LENGTH|CNT|REM|POS|FIL|SCALF|CONF|TDEF|ANDF|XORF|COMPF|DRF|ACDS|ACDS2|ICDS|VECTORP|VECTORHP|ROTATEP|ROTATEHP|FIX|FLT|INT|FLOAT)\\b"
        }
      ]
    },
    "identifiers": {
      "patterns": [
        {
          "name": "variable.other.cms2",
          "match": "\\b[A-Za-z][A-Za-z0-9_]*\\b"
        }
      ]
    }
  }
}
